# Minimalist Weather App

React Native is a great framework to develop cross-platform mobile applications for the platforms iOS and Android. In this, I am going to take you through the process of building a "minimalist" weather application using React Native by fetching real time data. If you have never worked with React Native, you can use this walkthrough as kickstart in your journey of becoming a mobile application developer and will be a cool project for your portfolio.

## Getting Started: Requirements

You have some experience of working your way with Reactjs, you will have no problem following this tutorial. If you newbie to JavaScript or Reactjs ecosystem, I want to halt right here and go through [this awesome resource](http://www.react.express/) that can help you with understanding the basic concepts in this tutorial. Don't spend too much time if you are not interested in building web applications using Reactjs, just go through the nitty-gritties.

Please note that React Native is not a hybrid mobile app framework like others available. It uses a bridge between Javascript and native APIs of a specific platform. Do take a look at [React Native Official Docs](https://facebook.github.io/react-native/docs/getting-started.html) to read more about this.

I will be using [Expo](https://expo.io/) which is described as "the fastest way to build an app". It is an opensource set of tools and services that comes in handy, especially if you are getting started in the React Native world. The development tool I am going to use from Expo is [Expo XDE](https://expo.io/).

**Requirements summary**

* You know how to write JavaScript
* Familiar with React
* Nodejs installed on your local machine
* Simple `npm` commands

That's all. Let us get started with the development process.

## Getting Started: In real this time

Open the Expo XDE after its installation and click on the "Create New Project".

![ss1](https://i.imgur.com/1iDhrJD.png)

Enter the name of your application and click on "Create". The name of the application will be in lowercase, I don't know why, Expo XDE UI does support but that's the it works.

![ss2](https://i.imgur.com/4Ig1bal.png)
![ss3](https://i.imgur.com/2uG6ny6.png)

Expo, behind the scenes using React Native Package manager to simulate the application and the load dependencies from the app's `package.json` file. The benefit of using Expo XDE is that you do not have to open multiple terminal windows and you can test the app while still developing on a real device. Once it is done with process of generating a source code of our app, we can start it in a simulator on our local machine to see the default app it comes with.

![ss4](https://i.imgur.com/lGGeevu.png)

If you are on Mac, make sure, you have Xcode installed. If you are using Windows, please follow the instructions to install Android Studio to run simulator.

If you want to skip simulating the app and run it on an actual device without generating any `.apk` or `.ipa`, install the Expo client and scan the QR code generated by default by Expo XDE.

![ss5](https://i.imgur.com/tqqVy6K.png)

Once, bundling of the source code is done you will be prompt with a success message on the Expo XDE terminal:

![ss6](https://i.imgur.com/S9XNSrY.png)

And you will be able to see that our default app is running on the device:

![ss7](https://i.imgur.com/FcYhygN.png)

![ss8](https://i.imgur.com/cTtE3yE.png)

The message displayed here is the same code that is rendered by `App.js` in the root of our app.

```javascript
import React from 'react';
import { StyleSheet, Text, View } from 'react-native';

export default class App extends React.Component {
  render() {
    return (
      <View style={styles.container}>
        <Text>Minimalist Weather App</Text>
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center'
  }
});
```

Change the `<Text>` to

```javascript
<Text>Minimalist Weather App</Text>
```

and you will see the output being rendered and the app is reloaded live. You don't have to refresh it to see the changes.

![ss9](https://i.imgur.com/8gZJrdG.png)

This completes our first getting started step. In the next step, we will build a static prototype of what our app if going to look like.

## The Prototype

In this step, we will be developing our first screen, that is going to be loading screen.

In your `App.js`, define a local state:

```javascript
import React from 'react';
import { StyleSheet, Text, View } from 'react-native';

export default class App extends React.Component {
  state = {
    isLoading: false
  };

  render() {
    const { isLoading } = this.state;
    return (
      <View style={styles.container}>
        {isLoading ? null : (
          <View>
            <Text>Minimalist Weather App</Text>
          </View>
        )}
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center'
  }
});
```

The above code states that when our local state object `isLoading` is false, we will show the name of the applicaiton. This is what we are going to render. Later on, instead of displaying the name of application we will be showing the weather here once our API has successfully fetch the data. For now, I am sticking to this message because first we are going to work on, what if our app is in the state of loading? What should we display?

## Using Lottie

We will be using [Lottie](https://www.lottiefiles.com/) for an animated loading screen. It is an opensource library that renders Adobe Effects by providing easy to use animations just like static images. Installing Lottie module in a project can a bit tricky but fortunately, Expo provides support for it. We do not have to install anything since we are using Expo. Sine it is in Alpha mode, do not get worried by the word `DangerZone`.

Import the library, in App.js:

```
import { DangerZone } from 'expo';
const { Lottie } = DangerZone;
```

Then include a variable in our local state called `animation` which will help in playing and restarting the itself. I am using [this file](https://www.lottiefiles.com/110-location) for our animation, of course you are free to choose whichever.

```javascript
state = {
  isLoading: true,
  animation: null
};
```

We will define to custom functions: `_playAnimation` and `_loadAnimationAsync` that perform the animation and load the animation from the internet using the `fetch` API. We will also be pre-mounting our animation using `componentWillMount()` method availble to us by core React. In this Life cycle method, when the state is set, it can be called before the initial render. In general it use to prepare either the first render or update the state before the render. This is why we are using it. We need to update the state we defined.

```javascript
import React from 'react';
import { StyleSheet, Text, View } from 'react-native';
import { DangerZone } from 'expo';
const { Lottie } = DangerZone;

export default class App extends React.Component {
  state = {
    isLoading: true,
    animation: null
  };

  componentWillMount() {
    this._playAnimation();
  }

  _playAnimation = () => {
    if (!this.state.animation) {
      this._loadAnimationAsync();
    } else {
      this.animation.reset();
      this.animation.play();
    }
  };

  _loadAnimationAsync = async () => {
    let result = await fetch(
      'https://www.lottiefiles.com/storage/datafiles/a795e9d1bd5672fd901329d51661db5c/JSON/location.json'
    );

    this.setState(
      { animation: JSON.parse(result._bodyText) },
      this._playAnimation
    );
  };

  render() {
    const { isLoading } = this.state;

    return (
      <View style={styles.container}>
        {isLoading ? (
          <View style={styles.animationContainer}>
            {this.state.animation && (
              <Lottie
                ref={animation => {
                  this.animation = animation;
                }}
                style={styles.loadingAnimation}
                source={this.state.animation}
              />
            )}
          </View>
        ) : (
          <View>
            <Text>Minimalist Weather App</Text>
          </View>
        )}
      </View>
    );
  }
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center'
  },
  animationContainer: {
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center',
    flex: 1
  },
  loadingAnimation: {
    width: 400,
    height: 400,
    backgroundColor: 'transparent'
  }
});
```

We have defined some styles for our animation to render as per our need through `animationContainer` and `loadingAnimation`. Also note that, temporarily, I have set our `isLoading` state to true to see if our animation is working.

![ss10](https://i.imgur.com/z0P4J74.gif)
